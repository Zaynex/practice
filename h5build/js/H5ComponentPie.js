var H5ComponentPie=function(t,e){var n=new H5ComponentBase(t,e),o=e.width,a=e.height,i=document.createElement("canvas"),s=i.getContext("2d");i.width=s.width=o,i.height=i.height=a,$(i).css("zIndex",1),n.append(i);var c=o/2;s.beginPath(),s.fillStyle="#eee",s.strokeStyle="#eee",s.lineWidth=1,s.arc(c,c,c,0,2*Math.PI),s.fill(),s.stroke();var i=document.createElement("canvas"),s=i.getContext("2d");i.width=s.width=o,i.height=s.height=a,$(i).css("zIndex",2),n.append(i);for(var h=["red","green","blue","#a00","orange"],r=1.5*Math.PI,l=0,d=2*Math.PI,f=e.data.length,p=0;p<f;p++){var g=e.data[p],u=g[2]||(g[2]=h.pop());l=r+d*g[1],s.beginPath(),s.fillStyle=u,s.strokeStyle=u,s.lineWidth=.1,s.moveTo(c,c),s.arc(c,c,c,r,l),s.fill(),s.stroke(),r=l;var v=$('<div class="text"></div>');v.text(e.data[p][0]);var m=$('<div class="per"></div>');m.text(100*e.data[p][1]+"%"),v.append(m);var x=c+Math.sin(.3*Math.PI-r)*c,P=c+Math.cos(.3*Math.PI-r)*c;x>o/2?v.css("left",x/2):v.css("right",(o-x)/2+10),P>a/2?v.css("top",P/2):v.css("bottom",(a-P)/2),e.data[p][2]&&v.css("color",e.data[p][2]),v.css("opacity",0),n.append(v)}var i=document.createElement("canvas"),s=i.getContext("2d");i.width=s.width=o,i.height=s.height=a,$(i).css("zIndex",3),n.append(i),s.fillStyle="#eee",s.strokeStyle="#eee",s.lineWidth=1;var I=function(t){s.clearRect(0,0,o,a),s.beginPath(),s.moveTo(c,c),t<=0?(s.arc(c,c,c,0,2*Math.PI),n.find(".text").css("opacity",0)):s.arc(c,c,c,r,r+2*Math.PI*t,!0),s.fill(),s.stroke(),t>=1&&(n.find(".text").css("transition","all 0s"),H5ComponentPie.reSort(n.find(".text")),n.find(".text").css("transition","all 1s"),n.find(".text").css("opacity",1),s.clearRect(0,0,o,a))};return I(0),n.on("onLoad",function(){for(p=0;p<100;p++)!function(t){setTimeout(function(){I(t/100+.1),console.log(t)},10*t+500)}(p)}),n.on("onLeave",function(){for(p=0;p<100;p++)!function(t){setTimeout(function(){I(1-t/100)},10*t)}(p)}),n};H5ComponentPie.reSort=function(t){var e=function(t,e){var n=$(t).offset(),o=$(e).offset(),a=[n.left,$(t).width()+n.left],i=[n.top,$(t).height()+n.top],s=[o.left,$(e).width()+o.left],c=[o.left,$(e).height()+o.top],h=a[0]>s[0]&&a[0]<s[1]||a[1]>s[0]&&a[1]<s[1],r=i[0]>c[0]&&i[0]<c[1]||i[1]>c[0]&&i[1]<c[1];return h&&r},n=function(t,e){"auto"!=$(t).css("top")&&$(t).css("top",parseInt($(t).css("top"))+$(e).height()),"auto"!=$(t).css("bottom")&&$(t).css("bottom",parseInt($(t).css("bottom"))+$(e).height())},o=[t[0]];$.each(t,function(t,n){e(o[o.length-1],n)&&o.push(n)}),o.length>1&&($.each(o,function(t,e){o[t+1]&&n(e,o[t+1])}),H5ComponentPie.reSort(o))};
//# sourceMappingURL=H5ComponentPie.js.map
